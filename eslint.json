[{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/App.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BikeList' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RentalForm' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Confirmation' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Route, Routes } from 'react-router-dom'\nimport './App.css'\nimport { Home } from './pages/Home'\nimport { BikeList } from './pages/BikeList'\nimport { RentalForm } from './pages/RentalForm'\nimport { Confirmation } from './pages/Confirmation'\nimport { BikeList } from './pages/BikeList'\n\nfunction App() {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<Home />} />\n      <Route path=\"/confirm/:id\" element={<Confirm />} />\n    </Routes>\n  )\n}\n\nexport default App\n","usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/components/BikeCard.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎`","line":65,"column":1,"nodeType":null,"messageId":"delete","endLine":66,"endColumn":1,"fix":{"range":[1597,1598],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useNavigate } from 'react-router-dom'\n\nexport type BikeAvailability = 'available' | 'unavailable'\n\nexport type Bike = {\n  id: number\n  name: string\n  type: string\n  rate_per_day_cents: number\n  availability_status: BikeAvailability\n}\n\ntype BikeCardProps = {\n  bike: Bike\n}\n\nconst currencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 2,\n})\n\nexport function BikeCard({ bike }: BikeCardProps) {\n  const navigate = useNavigate()\n\n  const pricePerDay = currencyFormatter.format(bike.rate_per_day_cents / 100)\n  const isAvailable = bike.availability_status === 'available'\n\n  return (\n    <article className=\"bike-card\" aria-label={`${bike.name} details`}>\n      <header className=\"bike-card__header\">\n        <h2>{bike.name}</h2>\n        <p className=\"bike-card__type\">{bike.type}</p>\n      </header>\n\n      <dl className=\"bike-card__details\">\n        <div>\n          <dt>Price per day</dt>\n          <dd>{pricePerDay}</dd>\n        </div>\n        <div>\n          <dt>Availability</dt>\n          <dd>\n            <span\n              className={`bike-card__availability bike-card__availability--${bike.availability_status}`}\n              aria-live=\"polite\"\n            >\n              {isAvailable ? 'Available now' : 'Currently unavailable'}\n            </span>\n          </dd>\n        </div>\n      </dl>\n\n      <button\n        type=\"button\"\n        className=\"bike-card__rent-button\"\n        onClick={() => navigate(`/rent/${bike.id}`)}\n        disabled={!isAvailable}\n      >\n        Rent\n      </button>\n    </article>\n  )\n}\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/lib/api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/pages/BikeList.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎··········We·could·not·load·the·bike·list.·Please·try·again·in·a·moment.⏎········` with `We·could·not·load·the·bike·list.·Please·try·again·in·a·moment.`","line":51,"column":25,"nodeType":null,"messageId":"replace","endLine":53,"endColumn":9,"fix":{"range":[1263,1345],"text":"We could not load the bike list. Please try again in a moment."}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useEffect, useState } from 'react'\nimport { BikeCard } from '../components/BikeCard'\nimport type { Bike } from '../components/BikeCard'\nimport api from '../lib/api'\n\ntype FetchState = 'idle' | 'loading' | 'success' | 'error'\n\nexport function BikeList() {\n  const [bikes, setBikes] = useState<Bike[]>([])\n  const [status, setStatus] = useState<FetchState>('idle')\n\n  useEffect(() => {\n    let isActive = true\n\n    async function loadBikes() {\n      setStatus('loading')\n\n      try {\n        const response = await api.get<Bike[]>('/api/bikes')\n        if (!isActive) return\n        setBikes(response.data)\n        setStatus('success')\n      } catch (error) {\n        console.error('Failed to fetch bikes', error)\n        if (!isActive) return\n        setStatus('error')\n      }\n    }\n\n    loadBikes()\n\n    return () => {\n      isActive = false\n    }\n  }, [])\n\n  const showEmptyState = status === 'success' && bikes.length === 0\n\n  return (\n    <main className=\"container\">\n      <h1>Available Bikes</h1>\n      <p>Choose the perfect ride for your next adventure.</p>\n\n      {status === 'loading' && (\n        <p role=\"status\" aria-live=\"polite\">\n          Loading bikes&hellip;\n        </p>\n      )}\n\n      {status === 'error' && (\n        <p role=\"alert\">\n          We could not load the bike list. Please try again in a moment.\n        </p>\n      )}\n\n      {showEmptyState && (\n        <p role=\"status\" aria-live=\"polite\">\n          No bikes are currently available. Please check back soon.\n        </p>\n      )}\n\n      {status === 'success' && bikes.length > 0 && (\n        <section className=\"bike-grid\" aria-label=\"Available bikes\">\n          {bikes.map((bike) => (\n            <BikeCard key={bike.id} bike={bike} />\n          ))}\n        </section>\n      )}\n    </main>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/pages/Confirmation.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎····!Number.isFinite(yearNum)·||⏎····!Number.isFinite(monthNum)·||⏎····!Number.isFinite(dayNum)⏎··` with `!Number.isFinite(yearNum)·||·!Number.isFinite(monthNum)·||·!Number.isFinite(dayNum)`","line":60,"column":7,"nodeType":null,"messageId":"replace","endLine":64,"endColumn":3,"fix":{"range":[1351,1450],"text":"!Number.isFinite(yearNum) || !Number.isFinite(monthNum) || !Number.isFinite(dayNum)"}},{"ruleId":"prettier/prettier","severity":1,"message":"Insert `⏎····`","line":121,"column":47,"nodeType":null,"messageId":"insert","endLine":121,"endColumn":47,"fix":{"range":[2793,2793],"text":"\n    "}},{"ruleId":"prettier/prettier","severity":1,"message":"Insert `··`","line":122,"column":1,"nodeType":null,"messageId":"insert","endLine":122,"endColumn":1,"fix":{"range":[2813,2813],"text":"  "}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `}` with `··}⏎··`","line":123,"column":3,"nodeType":null,"messageId":"replace","endLine":123,"endColumn":4,"fix":{"range":[2849,2850],"text":"  }\n  "}},{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎·········`","line":152,"column":22,"nodeType":null,"messageId":"delete","endLine":153,"endColumn":10,"fix":{"range":[3593,3603],"text":""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎····()·=>·rental?.end_date·??·preview?.end_date·??·null,⏎····[rental,·preview],⏎··` with `()·=>·rental?.end_date·??·preview?.end_date·??·null,·[rental,·preview]`","line":180,"column":27,"nodeType":null,"messageId":"replace","endLine":183,"endColumn":3,"fix":{"range":[4264,4347],"text":"() => rental?.end_date ?? preview?.end_date ?? null, [rental, preview]"}},{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎···`","line":185,"column":26,"nodeType":null,"messageId":"delete","endLine":186,"endColumn":4,"fix":{"range":[4375,4379],"text":""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎····()·=>·formatDisplayDate(startDate),⏎····[startDate],⏎··` with `()·=>·formatDisplayDate(startDate),·[startDate]`","line":188,"column":38,"nodeType":null,"messageId":"replace","endLine":191,"endColumn":3,"fix":{"range":[4492,4552],"text":"() => formatDisplayDate(startDate), [startDate]"}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎····()·=>·formatDisplayDate(endDate),⏎····[endDate],⏎··` with `()·=>·formatDisplayDate(endDate),·[endDate]`","line":192,"column":36,"nodeType":null,"messageId":"replace","endLine":195,"endColumn":3,"fix":{"range":[4589,4645],"text":"() => formatDisplayDate(endDate), [endDate]"}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎······?·preview.total_price_cents⏎·····` with `·?·preview.total_price_cents`","line":228,"column":51,"nodeType":null,"messageId":"replace","endLine":230,"endColumn":6,"fix":{"range":[5598,5638],"text":" ? preview.total_price_cents"}},{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎···`","line":232,"column":26,"nodeType":null,"messageId":"delete","endLine":233,"endColumn":4,"fix":{"range":[5672,5676],"text":""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎······?·currencyFormatter.format(totalPriceCents·/·100)⏎·····` with `·?·currencyFormatter.format(totalPriceCents·/·100)`","line":236,"column":28,"nodeType":null,"messageId":"replace","endLine":238,"endColumn":6,"fix":{"range":[5781,5843],"text":" ? currencyFormatter.format(totalPriceCents / 100)"}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `(⏎········<p·role=\"alert\">{errorMessage}</p>⏎······)` with `<p·role=\"alert\">{errorMessage}</p>`","line":251,"column":46,"nodeType":null,"messageId":"replace","endLine":253,"endColumn":8,"fix":{"range":[6204,6256],"text":"<p role=\"alert\">{errorMessage}</p>"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":13,"source":"import { useEffect, useMemo, useState } from 'react'\nimport axios from 'axios'\nimport { useLocation, useParams } from 'react-router-dom'\nimport api from '../lib/api'\n\ntype RentalPreview = {\n  name?: string\n  email?: string\n  phone?: string\n  start_date?: string\n  end_date?: string\n  selected_bike?: number\n  bike_name?: string | null\n  total_price_cents?: number\n  duration_days?: number\n}\n\ntype RentalRecord = {\n  id: number\n  start_date?: string\n  end_date?: string | null\n  total_price_cents?: number\n  bike_id?: number\n  user_id?: number\n  bike_name?: string | null\n  name?: string\n  email?: string\n  phone?: string | null\n  customer_name?: string\n  customer_email?: string\n  customer_phone?: string | null\n  [key: string]: unknown\n}\n\ntype FetchStatus = 'idle' | 'loading' | 'success' | 'error'\n\nconst currencyFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 2,\n})\n\nconst dateFormatter = new Intl.DateTimeFormat('en-US', { dateStyle: 'medium' })\n\nfunction parseIsoDate(value: string | undefined | null): Date | null {\n  if (!value) {\n    return null\n  }\n\n  const match = /^(\\d{4})-(\\d{2})-(\\d{2})$/.exec(value)\n  if (!match) {\n    return null\n  }\n\n  const [, year, month, day] = match\n  const yearNum = Number(year)\n  const monthNum = Number(month)\n  const dayNum = Number(day)\n\n  if (\n    !Number.isFinite(yearNum) ||\n    !Number.isFinite(monthNum) ||\n    !Number.isFinite(dayNum)\n  ) {\n    return null\n  }\n\n  return new Date(Date.UTC(yearNum, monthNum - 1, dayNum))\n}\n\nfunction formatDisplayDate(value: string | undefined | null): string | null {\n  const parsed = parseIsoDate(value)\n  if (!parsed) {\n    return null\n  }\n  return dateFormatter.format(parsed)\n}\n\nfunction computeDurationDays(\n  start: string | undefined | null,\n  end: string | undefined | null,\n): number | null {\n  const startDate = parseIsoDate(start)\n  const endDate = parseIsoDate(end)\n  if (!startDate || !endDate) {\n    return null\n  }\n\n  const diffMs = endDate.getTime() - startDate.getTime()\n  if (diffMs <= 0) {\n    return null\n  }\n\n  const diffDays = diffMs / (1000 * 60 * 60 * 24)\n  const rounded = Math.round(diffDays)\n  return Number.isFinite(rounded) ? rounded : null\n}\n\nfunction getString(value: unknown): string | null {\n  if (typeof value !== 'string') {\n    return null\n  }\n  const trimmed = value.trim()\n  return trimmed.length > 0 ? trimmed : null\n}\n\nfunction getPhone(value: unknown): string | null {\n  if (value == null) {\n    return null\n  }\n  if (typeof value === 'string') {\n    const trimmed = value.trim()\n    return trimmed.length > 0 ? trimmed : null\n  }\n  return null\n}\n\nexport function Confirmation() {\n  const { id } = useParams<{ id: string }>()\n  const location = useLocation()\n  const preview: RentalPreview | undefined = (location.state as {\n    rentalPreview?: RentalPreview\n  })?.rentalPreview\n\n  const [status, setStatus] = useState<FetchStatus>('idle')\n  const [errorMessage, setErrorMessage] = useState<string | null>(null)\n  const [rental, setRental] = useState<RentalRecord | null>(null)\n\n  useEffect(() => {\n    if (!id) {\n      setErrorMessage('Rental identifier was not provided.')\n      setStatus('error')\n      return\n    }\n\n    let isActive = true\n\n    async function loadRental() {\n      setStatus('loading')\n      try {\n        const response = await api.get<RentalRecord>(`/api/rentals/${id}`)\n        if (!isActive) {\n          return\n        }\n        setRental(response.data)\n        setStatus('success')\n      } catch (error) {\n        if (!isActive) {\n          return\n        }\n\n        let message =\n          'We could not load your rental details. Please try again shortly.'\n        if (axios.isAxiosError(error)) {\n          message =\n            error.response?.data?.error?.message ??\n            error.response?.data?.message ??\n            error.message ??\n            message\n        } else if (error instanceof Error) {\n          message = error.message\n        }\n\n        setErrorMessage(message)\n        setStatus('error')\n      }\n    }\n\n    loadRental()\n\n    return () => {\n      isActive = false\n    }\n  }, [id])\n\n  const startDate = useMemo(\n    () => rental?.start_date ?? preview?.start_date ?? null,\n    [rental, preview],\n  )\n  const endDate = useMemo(\n    () => rental?.end_date ?? preview?.end_date ?? null,\n    [rental, preview],\n  )\n\n  const previewDuration =\n    typeof preview?.duration_days === 'number' ? preview.duration_days : null\n\n  const formattedStartDate = useMemo(\n    () => formatDisplayDate(startDate),\n    [startDate],\n  )\n  const formattedEndDate = useMemo(\n    () => formatDisplayDate(endDate),\n    [endDate],\n  )\n\n  const durationDays = useMemo(() => {\n    const computed = computeDurationDays(startDate, endDate)\n    if (computed !== null) {\n      return computed\n    }\n    return previewDuration\n  }, [startDate, endDate, previewDuration])\n\n  const rawRental = rental as Record<string, unknown> | null\n\n  const contactName =\n    getString(rawRental?.['name']) ??\n    getString(rawRental?.['customer_name']) ??\n    getString(preview?.name)\n\n  const contactEmail =\n    getString(rawRental?.['email']) ??\n    getString(rawRental?.['customer_email']) ??\n    getString(preview?.email)\n\n  const contactPhone =\n    getPhone(rawRental?.['phone']) ??\n    getPhone(rawRental?.['customer_phone']) ??\n    getPhone(preview?.phone)\n\n  const bikeName =\n    getString(rawRental?.['bike_name']) ??\n    getString(preview?.bike_name) ??\n    (rental?.bike_id != null ? `Bike #${rental.bike_id}` : null)\n\n  const previewTotalPrice =\n    typeof preview?.total_price_cents === 'number'\n      ? preview.total_price_cents\n      : null\n\n  const totalPriceCents =\n    rental?.total_price_cents ?? previewTotalPrice ?? null\n\n  const totalPrice =\n    totalPriceCents != null\n      ? currencyFormatter.format(totalPriceCents / 100)\n      : null\n\n  return (\n    <main className=\"container\">\n      <h1>Rental Confirmed</h1>\n      <p>Thank you for reserving your ride with Personal Transport Rentals.</p>\n\n      {status === 'loading' && (\n        <p role=\"status\" aria-live=\"polite\">\n          Retrieving your rental details&hellip;\n        </p>\n      )}\n\n      {status === 'error' && errorMessage && (\n        <p role=\"alert\">{errorMessage}</p>\n      )}\n\n      {status === 'success' && rental && (\n        <section className=\"confirmation-card\" aria-label=\"Rental details\">\n          <h2>Reservation #{rental.id}</h2>\n\n          <dl className=\"confirmation-card__details\">\n            {bikeName && (\n              <div>\n                <dt>Bike</dt>\n                <dd>{bikeName}</dd>\n              </div>\n            )}\n            {formattedStartDate && (\n              <div>\n                <dt>Start date</dt>\n                <dd>{formattedStartDate}</dd>\n              </div>\n            )}\n            {formattedEndDate && (\n              <div>\n                <dt>End date</dt>\n                <dd>{formattedEndDate}</dd>\n              </div>\n            )}\n            {durationDays !== null && durationDays > 0 && (\n              <div>\n                <dt>Duration</dt>\n                <dd>\n                  {durationDays} {durationDays === 1 ? 'day' : 'days'}\n                </dd>\n              </div>\n            )}\n            {totalPrice && (\n              <div>\n                <dt>Total price</dt>\n                <dd>{totalPrice}</dd>\n              </div>\n            )}\n            {rental.user_id != null && (\n              <div>\n                <dt>User ID</dt>\n                <dd>{rental.user_id}</dd>\n              </div>\n            )}\n          </dl>\n\n          {(contactName || contactEmail || contactPhone) && (\n            <section className=\"confirmation-card__contact\">\n              <h3>Contact details</h3>\n              <ul>\n                {contactName && <li>{contactName}</li>}\n                {contactEmail && <li>{contactEmail}</li>}\n                {contactPhone && <li>{contactPhone}</li>}\n              </ul>\n            </section>\n          )}\n        </section>\n      )}\n    </main>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/pages/Home.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/src/pages/RentalForm.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎········(bike)·=>·bike.id·===·Number(previous.bikeId),⏎······` with `(bike)·=>·bike.id·===·Number(previous.bikeId)`","line":96,"column":53,"nodeType":null,"messageId":"replace","endLine":98,"endColumn":7,"fix":{"range":[2436,2498],"text":"(bike) => bike.id === Number(previous.bikeId)"}},{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎·······`","line":105,"column":74,"nodeType":null,"messageId":"delete","endLine":106,"endColumn":8,"fix":{"range":[2666,2674],"text":""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎····field:·Key,⏎····value:·FormValues[Key],⏎··` with `field:·Key,·value:·FormValues[Key]`","line":132,"column":54,"nodeType":null,"messageId":"replace","endLine":135,"endColumn":3,"fix":{"range":[3390,3437],"text":"field: Key, value: FormValues[Key]"}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎········'The·selected·bike·is·no·longer·available.·Please·choose·another·bike.',⏎······` with `'The·selected·bike·is·no·longer·available.·Please·choose·another·bike.'`","line":194,"column":20,"nodeType":null,"messageId":"replace","endLine":196,"endColumn":7,"fix":{"range":[4899,4987],"text":"'The selected bike is no longer available. Please choose another bike.'"}},{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎·····`","line":205,"column":28,"nodeType":null,"messageId":"delete","endLine":206,"endColumn":6,"fix":{"range":[5199,5205],"text":""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎··········error.response?.data?.message·??⏎·········` with `·error.response?.data?.message·??`","line":247,"column":50,"nodeType":null,"messageId":"replace","endLine":249,"endColumn":10,"fix":{"range":[6594,6647],"text":" error.response?.data?.message ??"}},{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎·······`","line":265,"column":79,"nodeType":null,"messageId":"delete","endLine":266,"endColumn":8,"fix":{"range":[7091,7099],"text":""}},{"ruleId":"prettier/prettier","severity":1,"message":"Delete `⏎·········`","line":277,"column":77,"nodeType":null,"messageId":"delete","endLine":278,"endColumn":10,"fix":{"range":[7423,7433],"text":""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎················className=\"rental-form__error\"⏎················id=\"email-error\"⏎················role=\"alert\"⏎··············` with `·className=\"rental-form__error\"·id=\"email-error\"·role=\"alert\"`","line":316,"column":20,"nodeType":null,"messageId":"replace","endLine":320,"endColumn":15,"fix":{"range":[8785,8909],"text":" className=\"rental-form__error\" id=\"email-error\" role=\"alert\""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎················fieldErrors.startDate·?·'start-date-error'·:·undefined⏎··············` with `fieldErrors.startDate·?·'start-date-error'·:·undefined`","line":348,"column":33,"nodeType":null,"messageId":"replace","endLine":350,"endColumn":15,"fix":{"range":[9813,9899],"text":"fieldErrors.startDate ? 'start-date-error' : undefined"}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎················className=\"rental-form__error\"⏎················id=\"start-date-error\"⏎················role=\"alert\"⏎··············` with `·className=\"rental-form__error\"·id=\"start-date-error\"·role=\"alert\"`","line":354,"column":20,"nodeType":null,"messageId":"replace","endLine":358,"endColumn":15,"fix":{"range":[9998,10127],"text":" className=\"rental-form__error\" id=\"start-date-error\" role=\"alert\""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎················fieldErrors.endDate·?·'end-date-error'·:·undefined⏎··············` with `fieldErrors.endDate·?·'end-date-error'·:·undefined`","line":372,"column":33,"nodeType":null,"messageId":"replace","endLine":374,"endColumn":15,"fix":{"range":[10601,10683],"text":"fieldErrors.endDate ? 'end-date-error' : undefined"}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎················className=\"rental-form__error\"⏎················id=\"end-date-error\"⏎················role=\"alert\"⏎··············` with `·className=\"rental-form__error\"·id=\"end-date-error\"·role=\"alert\"`","line":378,"column":20,"nodeType":null,"messageId":"replace","endLine":382,"endColumn":15,"fix":{"range":[10780,10907],"text":" className=\"rental-form__error\" id=\"end-date-error\" role=\"alert\""}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `(⏎················<option·value=\"\">No·bikes·available</option>⏎··············)` with `<option·value=\"\">No·bikes·available</option>`","line":399,"column":47,"nodeType":null,"messageId":"replace","endLine":401,"endColumn":16,"fix":{"range":[11535,11613],"text":"<option value=\"\">No bikes available</option>"}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `(⏎················<option·value=\"\">Select·a·bike</option>⏎··············)` with `<option·value=\"\">Select·a·bike</option>`","line":402,"column":45,"nodeType":null,"messageId":"replace","endLine":404,"endColumn":16,"fix":{"range":[11659,11732],"text":"<option value=\"\">Select a bike</option>"}},{"ruleId":"prettier/prettier","severity":1,"message":"Insert `··`","line":422,"column":13,"nodeType":null,"messageId":"insert","endLine":422,"endColumn":13,"fix":{"range":[12316,12316],"text":"  "}},{"ruleId":"prettier/prettier","severity":1,"message":"Insert `··`","line":423,"column":1,"nodeType":null,"messageId":"insert","endLine":423,"endColumn":1,"fix":{"range":[12353,12353],"text":"  "}},{"ruleId":"prettier/prettier","severity":1,"message":"Insert `··`","line":424,"column":15,"nodeType":null,"messageId":"insert","endLine":424,"endColumn":15,"fix":{"range":[12457,12457],"text":"  "}},{"ruleId":"prettier/prettier","severity":1,"message":"Insert `··`","line":425,"column":1,"nodeType":null,"messageId":"insert","endLine":425,"endColumn":1,"fix":{"range":[12506,12506],"text":"  "}},{"ruleId":"prettier/prettier","severity":1,"message":"Replace `⏎············isSubmitting·||·bikeFetchStatus·!==·'success'·||·availableBikes.length·===·0⏎··········` with `isSubmitting·||·bikeFetchStatus·!==·'success'·||·availableBikes.length·===·0`","line":438,"column":21,"nodeType":null,"messageId":"replace","endLine":440,"endColumn":11,"fix":{"range":[12804,12904],"text":"isSubmitting || bikeFetchStatus !== 'success' || availableBikes.length === 0"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":20,"source":"import { useEffect, useMemo, useState } from 'react'\nimport type { FormEvent } from 'react'\nimport axios from 'axios'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport type { Bike } from '../components/BikeCard'\nimport api from '../lib/api'\n\ntype FormValues = {\n  name: string\n  email: string\n  phone: string\n  startDate: string\n  endDate: string\n  bikeId: string\n}\n\ntype FieldErrors = Partial<Record<keyof FormValues, string>>\n\ntype FetchStatus = 'idle' | 'loading' | 'success' | 'error'\n\nfunction calculateDurationDays(start: string, end: string): number | null {\n  if (!start || !end) {\n    return null\n  }\n\n  const startDate = new Date(start)\n  const endDate = new Date(end)\n\n  if (Number.isNaN(startDate.getTime()) || Number.isNaN(endDate.getTime())) {\n    return null\n  }\n\n  const diffMs = endDate.getTime() - startDate.getTime()\n  return diffMs / (1000 * 60 * 60 * 24)\n}\n\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n\nexport function RentalForm() {\n  const navigate = useNavigate()\n  const { bikeId: bikeIdParam } = useParams<{ bikeId?: string }>()\n\n  const [bikes, setBikes] = useState<Bike[]>([])\n  const [bikeFetchStatus, setBikeFetchStatus] = useState<FetchStatus>('idle')\n  const [values, setValues] = useState<FormValues>({\n    name: '',\n    email: '',\n    phone: '',\n    startDate: '',\n    endDate: '',\n    bikeId: bikeIdParam ?? '',\n  })\n  const [fieldErrors, setFieldErrors] = useState<FieldErrors>({})\n  const [formError, setFormError] = useState<string | null>(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  useEffect(() => {\n    let isMounted = true\n\n    async function loadBikes() {\n      setBikeFetchStatus('loading')\n      try {\n        const response = await api.get<Bike[]>('/api/bikes')\n        if (!isMounted) {\n          return\n        }\n        setBikes(response.data)\n        setBikeFetchStatus('success')\n      } catch (error) {\n        console.error('Failed to fetch bikes for rental form', error)\n        if (!isMounted) {\n          return\n        }\n        setBikeFetchStatus('error')\n      }\n    }\n\n    loadBikes()\n\n    return () => {\n      isMounted = false\n    }\n  }, [])\n\n  const availableBikes = useMemo(\n    () => bikes.filter((bike) => bike.availability_status === 'available'),\n    [bikes],\n  )\n\n  useEffect(() => {\n    if (availableBikes.length === 0) {\n      return\n    }\n\n    setValues((previous) => {\n      const hasValidSelection = availableBikes.some(\n        (bike) => bike.id === Number(previous.bikeId),\n      )\n\n      if (hasValidSelection) {\n        return previous\n      }\n\n      const preferredBike =\n        availableBikes.find((bike) => bike.id === Number(bikeIdParam)) ??\n        availableBikes[0]\n\n      return {\n        ...previous,\n        bikeId: preferredBike ? String(preferredBike.id) : '',\n      }\n    })\n  }, [availableBikes, bikeIdParam])\n\n  const selectedBike = useMemo(() => {\n    const id = Number(values.bikeId)\n    if (!Number.isFinite(id)) {\n      return undefined\n    }\n    return availableBikes.find((bike) => bike.id === id)\n  }, [availableBikes, values.bikeId])\n\n  const normalizedDurationDays = (() => {\n    const raw = calculateDurationDays(values.startDate, values.endDate)\n    if (raw === null) {\n      return null\n    }\n    const rounded = Math.round(raw)\n    return Number.isFinite(rounded) ? rounded : null\n  })()\n\n  function updateField<Key extends keyof FormValues>(\n    field: Key,\n    value: FormValues[Key],\n  ) {\n    setValues((previous) => ({\n      ...previous,\n      [field]: value,\n    }))\n  }\n\n  function validate(): FieldErrors {\n    const errors: FieldErrors = {}\n\n    if (!values.name.trim()) {\n      errors.name = 'Name is required.'\n    }\n\n    if (!values.email.trim()) {\n      errors.email = 'Email is required.'\n    } else if (!emailRegex.test(values.email.trim())) {\n      errors.email = 'Enter a valid email address.'\n    }\n\n    if (!values.startDate) {\n      errors.startDate = 'Start date is required.'\n    }\n\n    if (!values.endDate) {\n      errors.endDate = 'End date is required.'\n    }\n\n    if (!values.bikeId) {\n      errors.bikeId = 'Select a bike to continue.'\n    }\n\n    const duration = calculateDurationDays(values.startDate, values.endDate)\n    if (duration === null) {\n      if (!errors.endDate && values.startDate && values.endDate) {\n        errors.endDate = 'Provide valid rental dates.'\n      }\n    } else if (duration <= 0) {\n      errors.endDate = 'End date must be after start date.'\n    } else if (duration > 3) {\n      errors.endDate = 'Rentals cannot exceed 3 days.'\n    }\n\n    return errors\n  }\n\n  async function handleSubmit(event: FormEvent<HTMLFormElement>) {\n    event.preventDefault()\n    setFormError(null)\n\n    const validationErrors = validate()\n\n    if (Object.keys(validationErrors).length > 0) {\n      setFieldErrors(validationErrors)\n      return\n    }\n\n    setFieldErrors({})\n    if (!selectedBike) {\n      setFormError(\n        'The selected bike is no longer available. Please choose another bike.',\n      )\n      return\n    }\n\n    if (normalizedDurationDays === null || normalizedDurationDays <= 0) {\n      setFormError('Provide valid rental dates (up to three days).')\n      return\n    }\n\n    const totalPriceCents =\n      selectedBike.rate_per_day_cents * normalizedDurationDays\n    setIsSubmitting(true)\n\n    try {\n      const payload = {\n        name: values.name.trim(),\n        email: values.email.trim(),\n        phone: values.phone.trim() || undefined,\n        start_date: values.startDate,\n        end_date: values.endDate,\n        selected_bike: Number(values.bikeId),\n        bike_id: Number(values.bikeId),\n        total_price_cents: totalPriceCents,\n        duration_days: normalizedDurationDays,\n      }\n\n      const response = await api.post('/api/rentals', payload)\n      const rentalId: unknown = response.data?.id\n\n      if (typeof rentalId !== 'number') {\n        throw new Error('Rental created but id was not returned.')\n      }\n\n      navigate(`/confirmation/${rentalId}`, {\n        state: {\n          rentalPreview: {\n            name: values.name.trim(),\n            email: values.email.trim(),\n            phone: values.phone.trim(),\n            start_date: values.startDate,\n            end_date: values.endDate,\n            selected_bike: Number(values.bikeId),\n            bike_name: selectedBike?.name ?? null,\n            total_price_cents: totalPriceCents,\n            duration_days: normalizedDurationDays,\n          },\n        },\n      })\n    } catch (error) {\n      if (axios.isAxiosError(error)) {\n        const serverMessage =\n          error.response?.data?.error?.message ??\n          error.response?.data?.message ??\n          error.message\n        setFormError(serverMessage)\n      } else if (error instanceof Error) {\n        setFormError(error.message)\n      } else {\n        setFormError('An unexpected error occurred. Please try again.')\n      }\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <main className=\"container\">\n      <h1>Create a Rental</h1>\n      <p>\n        Reserve your bike by completing the form. Rentals are limited to three\n        consecutive days.\n      </p>\n\n      {bikeFetchStatus === 'loading' && (\n        <p role=\"status\" aria-live=\"polite\">\n          Loading available bikes&hellip;\n        </p>\n      )}\n\n      {bikeFetchStatus === 'error' && (\n        <p role=\"alert\">\n          We could not load bikes right now. Please refresh the page and try\n          again.\n        </p>\n      )}\n\n      <form className=\"rental-form\" onSubmit={handleSubmit} noValidate>\n        <fieldset className=\"rental-form__section\">\n          <legend>Contact details</legend>\n\n          <label className=\"rental-form__field\">\n            <span>Name*</span>\n            <input\n              type=\"text\"\n              name=\"name\"\n              value={values.name}\n              onChange={(event) => updateField('name', event.target.value)}\n              aria-invalid={fieldErrors.name ? 'true' : 'false'}\n              aria-describedby={fieldErrors.name ? 'name-error' : undefined}\n              required\n            />\n            {fieldErrors.name && (\n              <span className=\"rental-form__error\" id=\"name-error\" role=\"alert\">\n                {fieldErrors.name}\n              </span>\n            )}\n          </label>\n\n          <label className=\"rental-form__field\">\n            <span>Email*</span>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={values.email}\n              onChange={(event) => updateField('email', event.target.value)}\n              aria-invalid={fieldErrors.email ? 'true' : 'false'}\n              aria-describedby={fieldErrors.email ? 'email-error' : undefined}\n              required\n            />\n            {fieldErrors.email && (\n              <span\n                className=\"rental-form__error\"\n                id=\"email-error\"\n                role=\"alert\"\n              >\n                {fieldErrors.email}\n              </span>\n            )}\n          </label>\n\n          <label className=\"rental-form__field\">\n            <span>Phone (optional)</span>\n            <input\n              type=\"tel\"\n              name=\"phone\"\n              value={values.phone}\n              onChange={(event) => updateField('phone', event.target.value)}\n            />\n          </label>\n        </fieldset>\n\n        <fieldset className=\"rental-form__section\">\n          <legend>Rental details</legend>\n\n          <label className=\"rental-form__field\">\n            <span>Start date*</span>\n            <input\n              type=\"date\"\n              name=\"start_date\"\n              value={values.startDate}\n              onChange={(event) => updateField('startDate', event.target.value)}\n              aria-invalid={fieldErrors.startDate ? 'true' : 'false'}\n              aria-describedby={\n                fieldErrors.startDate ? 'start-date-error' : undefined\n              }\n              required\n            />\n            {fieldErrors.startDate && (\n              <span\n                className=\"rental-form__error\"\n                id=\"start-date-error\"\n                role=\"alert\"\n              >\n                {fieldErrors.startDate}\n              </span>\n            )}\n          </label>\n\n          <label className=\"rental-form__field\">\n            <span>End date*</span>\n            <input\n              type=\"date\"\n              name=\"end_date\"\n              value={values.endDate}\n              onChange={(event) => updateField('endDate', event.target.value)}\n              aria-invalid={fieldErrors.endDate ? 'true' : 'false'}\n              aria-describedby={\n                fieldErrors.endDate ? 'end-date-error' : undefined\n              }\n              required\n            />\n            {fieldErrors.endDate && (\n              <span\n                className=\"rental-form__error\"\n                id=\"end-date-error\"\n                role=\"alert\"\n              >\n                {fieldErrors.endDate}\n              </span>\n            )}\n          </label>\n\n          <label className=\"rental-form__field\">\n            <span>Bike*</span>\n            <select\n              name=\"selected_bike\"\n              value={values.bikeId}\n              onChange={(event) => updateField('bikeId', event.target.value)}\n              aria-invalid={fieldErrors.bikeId ? 'true' : 'false'}\n              aria-describedby={fieldErrors.bikeId ? 'bike-error' : undefined}\n              required\n              disabled={availableBikes.length === 0}\n            >\n              {availableBikes.length === 0 && (\n                <option value=\"\">No bikes available</option>\n              )}\n              {availableBikes.length > 0 && (\n                <option value=\"\">Select a bike</option>\n              )}\n              {availableBikes.map((bike) => (\n                <option key={bike.id} value={bike.id}>\n                  {bike.name}\n                </option>\n              ))}\n            </select>\n            {fieldErrors.bikeId && (\n              <span className=\"rental-form__error\" id=\"bike-error\" role=\"alert\">\n                {fieldErrors.bikeId}\n              </span>\n            )}\n          </label>\n\n          {selectedBike &&\n            normalizedDurationDays !== null &&\n            normalizedDurationDays > 0 &&\n            normalizedDurationDays <= 3 && (\n            <p className=\"rental-form__summary\">\n              You are reserving the {selectedBike.name} for {normalizedDurationDays}{' '}\n              {normalizedDurationDays === 1 ? 'day' : 'days'}.\n            </p>\n            )}\n        </fieldset>\n\n        {formError && (\n          <div className=\"rental-form__error-panel\" role=\"alert\">\n            {formError}\n          </div>\n        )}\n\n        <button\n          type=\"submit\"\n          className=\"rental-form__submit\"\n          disabled={\n            isSubmitting || bikeFetchStatus !== 'success' || availableBikes.length === 0\n          }\n        >\n          {isSubmitting ? 'Submitting…' : 'Submit rental request'}\n        </button>\n      </form>\n    </main>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/melissausher/Documents/Tek_Innov8rs/Personal_Transport_API-Sprint_1/PersonalTransportAPI/frontend/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
